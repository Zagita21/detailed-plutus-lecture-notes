<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>1-Lecture-One</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
  body {
    padding: 2cm; 
  }
}
</style>


</head>

<body>

<h1 id="toc_0">Lecture One</h1>

<h3 id="toc_1">1. Introduction</h3>

<p>Within this set of notes the following information will be presented. Firstly, the courses administration details are provided. Secondly, a coverage of the course content is outlined. Shortly thereafter, details about Plutus, the difficulty of the program and the (pseudo-optional) pre-requisites are given. Furthermore, an extensive explanation of the (E)UTxO model (which facilitates the possibility of transactions on the Cardano network - <strong>Cardanos unique accounting model</strong>) is fully explained. In addition, building an example contract is presented, which includes how to setup a NIX shell, how to start Plutus-playground-server and enable it to be locally accessible from the browser. Smart Contract compilation is demonstrated and an example of how to use the Plutus platform in whole is shown. As pioneers we are then encouraged to try this ourselves.</p>

<p><em>Note: this document contains information pulled in from the Plutus Pioneer Lecture series in addition to information provided by reliable sources, such as videos, papers and statements made by employees of IOHK. Furthermore, to provide some background information on models such as UTxO (unextended), other academic sources (papers and books) have also been referenced.</em></p>

<h3 id="toc_2">1.1 Administration</h3>

<ul>
<li>Lectures on every Thursday.</li>
<li>Q&amp;A Sessions Every Tuesday.</li>
<li>Occasional Guest Lectures.</li>
<li>Use the Discord server (and slack) to help one another when possible.</li>
</ul>

<h3 id="toc_3">1.2 Course Coverage</h3>

<p><strong>The Plutus Platform:</strong></p>

<ul>
<li>Smart Contacts on Cardano via (E)UTxO</li>
<li>Writing Smart Contracts with Haskell (Local, Production)</li>
<li>Compiling Haskell to Plutus-core using Plutus-Tx</li>
<li>Details Surrounding Plutus-core (GHC Plug-in)</li>
<li>Plutus-Tx Compiling Details (GHC Core): Intermediary Languages / Intermediary Representations</li>
</ul>

<p><strong>Further Underlying Concepts</strong></p>

<p><strong>Smart Contracts In Detail (and their various forms)</strong></p>

<p><strong>Testing and Implementing Smart Contracts</strong></p>

<ul>
<li>Using the Plutus Playground</li>
<li>Offline Locally</li>
</ul>

<p><strong>Native Tokens On Cardano</strong></p>

<ul>
<li>Minting Native Tokens</li>
<li>Burning Native Tokens</li>
<li>Use of Native Tokens Within Smart Contracts</li>
</ul>

<p><strong>Deploying Plutus Contracts</strong></p>

<p><strong>Writing Backends for Plutus Contracts</strong></p>

<h3 id="toc_4">1.3 Plutus Platform</h3>

<blockquote>
<p>&quot;Plutus Platform Learning is Difficult&quot; - Lars Brünjes</p>
</blockquote>

<p><em>Why So Difficult?</em></p>

<ul>
<li>Using (E)UTxO Model - Less intuitive than other similar technological implementations (E.G. ETH Accounting Model).</li>
<li>Plutus is brand new and under rapid development, thus is changing all the time.</li>
<li>Due to constant changes, we&#39;re required to regularly update project dependencies.</li>
<li>Tooling is not ideal...</li>
<li>Difficult To Access Syntax &amp; Repl Docs.</li>
<li>Difficult to Build Plutus (It&#39;s likely best to use NIX)</li>
<li>The Docker Image for the Plutus Platform is not yet ready.</li>
<li>Plutus-core is compiled down from Haskell, Haskell is fairly difficult.</li>
<li>It is recommended that you spend 40 hours per week, for 10 weeks to gain a solid understanding of Haskell before or whilst undertaking this course.</li>
<li>Plutus is BRAND new - we are the first people <strong>ever in the world to write plutus code</strong>.</li>
<li>This means: no quick answers from StackOverflow or google...</li>
</ul>

<p>However,</p>

<ul>
<li>Haskell courses and documentation has been made available to help pioneers learn.</li>
</ul>

<h3 id="toc_5">2. The (E)UTxO Model</h3>

<blockquote>
<p>“Any fool can know. The point is to understand.”
— Albert Einstein <a href="#1">[1]</a></p>
</blockquote>

<h3 id="toc_6">2.1 What is (E)UTxO?</h3>

<p>(E)UTxO abbreviates: &quot;Extended Unspent Transaction Output&quot;, but to understand the extended model, we must first examine the unextended model (UTxO, firstly implemented by BitCoin <a href="#2">[2]</a>).</p>

<h3 id="toc_7">2.2 UTxO Explained</h3>

<blockquote>
<p>&quot;If you want to get money, you have to consume an output that is laying around and in turn you get more outputs.&quot;
— Michael Peyton-Jones</p>
</blockquote>

<p><em>What are unspent transaction outputs? Simply put: They are outputs - which can be thought of as remaining financial change - from previous transactions on the Blockchain that are still currently &#39;unspent&#39; - Imagine you go to a shop, you buy a drink, you give the shopkeeper a £20 note, and you are given £19 back in change. That £19 is an unspent transaction output from the original transaction of the purchase of a drink.</em></p>

<p>UTxO is a model of accounting and is used to identify how much &#39;money&#39; (in this case: a digital &#39;currency&#39;) any &#39;wallet&#39; <sup><a href="#ft1">1</a></sup> on a blockchain data structure contains within it <sup><a href="#ft2">2</a></sup>. Each wallet address on a permission-less blockchain such as BTC is associated to a set of cryptographic &#39;tools&#39; which lock any funds (BTC, Digital Currency) that are tied to the above mentioned wallet. Spending funds (e.g. sending BTC from one wallet to another) equates to the transfer of ownership of BTC from one private key owner to another <a href="#3">[3]</a>. This is accomplished by signing a transaction with the initiators private key, which can only be confirmed by verifying the signature using the initiators public key.</p>

<p><strong>It is important to note that you can only use complete UTxOs as input. So, if Alice has 100 BTC and wishes to send 10 BTC to bob, Alice creates a transaction which consumes 100 BTC as input and creates two outputs, 90 BTC (for Alice) and 10 BTC (for Bob). This is similar to the example mentioned above regarding the use of a £20 note.</strong></p>

<p>You would therefore think that the sum of all input for any give Tx must equal the output, such that:</p>

<p><img src="https://latex.codecogs.com/svg.latex?\sum_{i=0}^{X}%20Tx_{i}%20=%20\sum_{o=0}^{Y}%20Tx_{o}"></p>

<p>However, this is not the case. Firstly, transaction fees must be considered. <em>Furthermore, on Cardano (that implements the (E)UTxO model, uses ADA and not BTC) native tokens have been rolled out. Thus, minting and burning of native tokens creates an imbalance between the cumulative inputs and resulting outputs of a transaction. However, this is content for later lecture (according to Lars).</em></p>

<p><em>Note: This is all accomplished through the use of a software wallets implementing transaction algorithms <sup><a href="#ft3">3</a></sup>. Furthermore, technically BTC does implement basic &#39;smart contracts&#39;, which is to say, the transactional algorithms may utilise BitCoin Script (which includes a validator for identifying addresses and a redeemer to unlock the ability to spend funds<a href="5">[5]</a>). As far as I understand, BitCoin Script is essentially a wrapper for managing public-private key cryptographic implementation and unlocking funds to spend through the use of digital signatures <a href="6">[6]</a>.</em></p>

<h3 id="toc_8">2.3 Advanced Transactions Using UTxO</h3>

<p>The extended implementation of UTxO as proposed by IOHK, developed and implemented by Cardano is much more powerful than BitCoins UTxO model. However, there exists &#39;advanced&#39; payment system elements implemented by &#39;basic&#39; UTxO. It is important to understand how multiple unspent transaction outputs from different wallets (essentially: different owners of BTC) can combine their UTxOs together to create a transaction output to be sent to an individual address.</p>

<p>Consider the scenario where Bob has 60 BTC (in the form of two UTxOs: 50 BTC and 10 BTC) and Alice has 90 BTC in the form of a single UTxO. However, they wish to send 110 BTC to Tom. Alice must consume her (only) UTxO and Bob must consume both his UTxOs to meet the required amount to be sent to Tom (creating three transaction inputs from two owners with three unspent transaction outputs).</p>

<p>Within this &#39;simple advanced&#39; transaction, the outputs generated by the initiated transaction ensures Tom receives 110 BTC and all other parties (Alice and Bob) receive their change by splitting the resulting output such that they receive the following <a href="7">[7]</a>:</p>

<p><img src="https://latex.codecogs.com/svg.latex?Given:%20Tx^{Alice}%20=%20\%2090%20\%20BTC\%20\%20and%20\%20%20\sum_{i=0}^{X}%20Tx_{i}^{Bob}%20=%2060%20\%20BTC"></p>

<p><img src="https://latex.codecogs.com/svg.latex?Alice%20\%20And%20\%20Bob%20\%20Pay%20\%20Tom%20\%20110%20\%20BTC%20\%20|%20\%20Thus%20\%20Change%20\%20Recieved%20\%20By%20\%20Alice%20\%20and%20\%20Bob"></p>

<div style="height: 1px;"></div>

<p><img src="https://latex.codecogs.com/svg.latex?\big(Alice%20\%20|%20\%20Tx^{Alice}%20-%20(110%20\div%202)%20\%20\big)%20=%2035%20\%20BTC"></p>

<p><img src="https://latex.codecogs.com/svg.latex?\big(Bob%20\%20|%20{%20\%20\Big[%20\sum_{i=0}^{X}%20Tx_{i}^{Bob}%20\Big]\%20-%20(110%20\div%202)%20}%20\%20\big)%20=%205%20\%20BTC"></p>

<h3 id="toc_9">2.4 And God Said Let There Be (E)UTxO</h3>

<p>Cardano implements an extended model of UTxO. The fundamentals remain the same. Thus, transactions are made up of numerous inputs, which themselves are unspent transaction outputs. However, there are some modifications to the model which are important. These modifications allow for more general transactions through the use of arbitrary logic.</p>

<p>Firstly, Cardano implements addresses differently to other cryptocurrencies (blockchains and distributed ledger technologies). Instead of using a simple hash-based derived address (using a public key as input), addresses in Cardano are generated using a derivation scheme outlined <a href="https://developers.cardano.org/docs/get-started/cardano-serialization-lib/generating-keys/">here</a>.<sup><a href="#fn4">4</a></sup> These addresses are referential in nature and point to scripts containing arbitrary logic. These scripts are programmes which are (ideally) deterministic, pure, replay-able state-machines. Somewhat similar to the aforementioned \(validators\), but are far more general in nature. They are, however, still used to determine whether a given UTxO may be consumed based on the \(redeemer\) input, which is now also arbitrary in nature and has replaced simple digital signature based input.</p>

<p>Secondly, transaction outputs also contains a component called \(datum\) <em>(which is the singular noun for data)</em>. \(Datum\) is useful for identifying state. This means that the (E)UTxO is at least as powerful as the ETH model.</p>

<p><strong>(E)UTxO Advantage: Validation of UTxO Off-Chain</strong></p>

<p>It is possible to check that a transaction will validate within your wallet before ever sending it to the chain.</p>

<p><strong>However, Simultaneous UTxO Consumption Is Possible</strong></p>

<p>Unspent transaction outputs can be consumed by others before your transaction has the opportunity to reach the chain (after being verified by your wallet software). In this instance, your transaction will simply be dropped back into the pool of transactions to be verified (so long as all the inputs are still there) and attempts to verify your transaction will continue.</p>

<p><strong>Scope: (E)UTxO Model Scripts, Redeemers and Datam</strong></p>

<p>The implementation of scripts within the (E)UTxO model ensures that the scope is limited to the transaction (or a small chain or transactions) that are attempting to be facilitated by a user. This means the state of the entire blockchain does not need to be known (as is the case with ETH). Furthermore, there is an appropriate degree of scope that enables to ability to create smart contracts which are (ideally) deterministic in nature, meaning: the output is predictable. This makes it more difficult to introduce bugs into the software.</p>

<h3 id="toc_10">3. Plutus Platform, Smart Contracts &amp; Nix</h3>

<p>During the first week of this program, we have been asked to:</p>

<ul>
<li>Clone The Plutus Pioneer Repo</li>
<li>Clone The Plutus Repo</li>
<li>Build Plutus (Using Nix, Cabal, The Docker Image Is Not Yet Ready)</li>
<li>Set Up The Plutus Binary Cache Appropriately (Otherwise It&#39;ll Take Forever To Build)</li>
<li>Start A Nix-Shell</li>
<li>Start The Plutus Playground Server Locally</li>
<li>Run NPM To Allow Access To The Playground Via A Local Server</li>
<li>Copy &amp; Paste A Complicated Haskell Smart Contract Into The Playground</li>
<li>Compile The Smart Contract</li>
<li>Interface With The Smart Contract Via A Web Browser</li>
<li>Apply Some Changes To The Contract</li>
<li>Play Around With The Interface Via The Browser</li>
</ul>

<h3 id="toc_11">3.1 Cloning Repos</h3>

<p>I would hope that if you were enrolled in this program, you can skip this chapter. But, in the interest of being exhaustive the process of cloning the repos is outlined below.</p>

<p>I typically like to place all my projects within the following directory:</p>

<div><pre><code class="language-none">~/code/.</code></pre></div>

<p>Navigate and clone the appropriate projects from IOHK:</p>

<div><pre><code class="language-none">cd ~/code/
git clone git@github.com:input-output-hk/plutus-pioneer-program.git
git clone git@github.com:input-output-hk/plutus.git</code></pre></div>

<p>Congratulations, we&#39;re on your way to getting started!</p>

<h3 id="toc_12">3.2 Building Plutus | Installing Nix (MacOS) | Cabal | Nix-Shell</h3>

<p>In order to build Plutus you&#39;re most likely going to need Nix (you can install Nix within a VM using nixOS, or you can install on MacOS or Windows. Be aware on MacOS you need xtools and potentially various other dependencies. Installing via Homebrew was suggested to me, but I found simply building the binaries easier.</p>

<p>Navigate to your home directory:</p>

<div><pre><code class="language-none">cd ~/.</code></pre></div>

<p>Download the latest version of Nix for MacOS and pipe into sh to start the install script:</p>

<div><pre><code class="language-none">curl -L https://nixos.org/nix/install | sh</code></pre></div>

<p><em>Note: ensure you have root priv-access.</em></p>

<p>Add the binary folder to your global PATH variable (note: I&#39;m using zshell):</p>

<div><pre><code class="language-none">sudo vim ~/.zshrc
export PATH=&quot;$HOME/.nix-profile/bin:$PATH&quot;</code></pre></div>

<p>Ensure you&#39;re using the current Plutus build by checking the .cabal-project file in the current weeks code folder.</p>

<p>Ensure the Nix binary cache is setup:</p>

<div><pre><code class="language-none">sudo vim /etc/nix/nix.conf
substituters        = https://hydra.iohk.io https://iohk.cachix.org https://cache.nixos.org/
trusted-public-keys = hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/</code></pre></div>

<p>Check the current builds project hash, it&#39;s displayed via the &#39;tag&#39;, now checkout to that branch in the Plutus github repo and begin a nix-shell:</p>

<p><img src="../img/git-project-hash.png" alt="./img/git-project-hash.png"></p>

<div><pre><code class="language-none">cd ~/code/plutus-pioneer-program
cd ~/code/plutus
git checkout ea0ca4e9f9821a9dbfc5255fa0f42b6f2b3887c4</code></pre></div>

<p>Change directory back to week one of the program and build the project using cabal:</p>

<div><pre><code class="language-none">cd ~/code/plutus-pioneer-program
cd code/week01
cabal build</code></pre></div>

<p>This may take some time, but be patient! When it&#39;s done, change directory to the Plutus playground client folder and start the Plutus playground server, open a new nix-shell and then npm start to be able to view the application in the browser:</p>

<div><pre><code class="language-none">cd ~/code/plutus/plutus-playground-client
plutus-playground-server
// new shell window
nix-shell
cd ~/code/plutus/plutus-playground-client
npm start</code></pre></div>

<p><em>This May Also Take Some Time...</em></p>

<p>But, you should end up with something like this, where the playground is being hosted locally @ localhost, port 8009:</p>

<p><img src="../img/npm.png" alt="./img/npm.png"></p>

<p>So, head on over to localhost @ port 8009 (http://localhost:8009). It looks so pretty! Doesn&#39;t it?</p>

<p><img src="../img/playground.png" alt="./img/playground.png"></p>

<p>Hit compile, and then hit simulate. You should see the interface to the Haskell program running as a smart contract on the Plutus pioneer playground server (locally), you should see (and play around with the following):</p>

<p><img src="../img/eval.png" alt="./img/eval.png"></p>

<p><img src="../img/sim.png" alt="./img/sim.png"></p>

<h3 id="toc_13">4. Exercise: Auction</h3>

<p>During the first week of the Plutus program the only real &#39;homework&#39; we were assigned was to get the playground up and running via Nix, mess about with it and simulate an NFT auction. This was all shown to us during the lecture, so it&#39;s pretty easy to follow.</p>

<ol>
<li>Open a new nix-shell (in ~/code/plutus).</li>
<li>Change directory to ~/code/plutus-pioneer-program/code/week01</li>
<li>Run cabal repl</li>
<li>Now you can run handy commands such as: import Ledger.TimeSlot (as you&#39;ll need this) + others.</li>
</ol>

<p>Now, you&#39;re going to need the EnglishAuction.hs script, which can be found @</p>

<div><pre><code class="language-none">~/code/plutus-pioneer-program/code/week01/src/week01/EnglishAuction.hs</code></pre></div>

<p>Copy and paste this into the Plutus Playground within your browser and hit compile. You should no be able to simulate something that looks like the following:</p>

<p><img src="../img/auction.png" alt="./img/auction.png"></p>

<h3 id="toc_14">4.1 Simulating</h3>

<p>As an NFT auction, we&#39;re using the T parameter in the wallets to represent an NFT. Go ahead and add an additional wallet and add some ADA to them. Now, when you go to add the start of the auction, you&#39;ll require an expiry time. The problem is, time is measured in POSIXTime. However, you can open the repl and run the following:</p>

<div><pre><code class="language-none">import Ledger.TimeSlot
slotToPOSIXTime 10</code></pre></div>

<p>This generates a time value for slot 10, as is shown below:</p>

<p><img src="../img/posix.png" alt="./img/posix.png"></p>

<p>Now you can start filling in the auction that we&#39;re about to simulate (I used some random values for ADA, etc, so the number of my Txs may be different to yours, but typically you should have at least three or so, with the first being the genesis transaction, which fills individuals wallets:</p>

<p><img src="../img/auction-eval.png" alt="./img/auction-eval.png"></p>

<p><strong>Transaction, Slot Zero</strong></p>

<p><img src="../img/auction-1.png" alt="./img/auction-1.png"></p>

<p><strong>Transaction, Slot One</strong></p>

<p><img src="../img/auction-2.png" alt="./img/auction-1.png"></p>

<p><strong>Transaction, Slot Two</strong></p>

<p><img src="../img/auction-3.png" alt="./img/auction-1.png"></p>

<h3 id="toc_15">4.2 Simulation Issue (Resolved)</h3>

<p>So, I noticed the NFT was not transferring from wallet one to wallet three. It turns out I hadn&#39;t put enough ADA into wallet three to bid for the NFT in addition to paying the transaction fee. All in all, good learning experience. See below:</p>

<p><img src="../img/auction-4.png" alt="./img/auction-1.png"></p>

<h3 id="toc_16">5. Possible Problems &amp; Uncertainties</h3>

<h6 id="toc_17">The Following Paragraphs are sections that I removed, as I wasn&#39;t 100% sure as to whether they were accurate or not.</h6>

<p>Firstly, the \(validator\) in Cardano is extended to also implement the aforementioned arbitrary logic and is no longer a simple transactional algorithm which returns a boolean value based on the input from the \(redeemer\). Therefore, the \(validator\) is a programmable.</p>

<p>Furthermore, the \(validator\) ultimately remains unmodified (recall that the \(validator\) determines the address of the transaction output. Thus, it&#39;s not a great idea to add too much complexity to the on-chain validation script).</p>

<p><em>(From the video by Michael Peyton Jones)</em></p>

<p>As you have most likely identified by now, the \(validator\) is required to (rather self-evidently) validate the entire transaction on-chain. In order for it to perform this function, it must have the appropriate scope such that it can evaluate the entire context of the transaction. This is why an additional component is added to all Cardano transactions called \(context\). The \(validator\) can now see all inputs and outputs for the transaction that it is validating and can be re-used within a chain of potential transactions. A chain of transactions can be thought of as a state machine.</p>

<p><em>(Information on Context and State Machines which may be outdated? They were not in the first lecture)</em></p>

<p>Secondly, transaction outputs also contains a component called \(datum\) <em>(which is the singular noun for data)</em>. \(Datum\) is useful for identifying state (this is important for the implementation of state machines, as is explained in the next paragraph).</p>

<p><em>(Again, this may be useful later, but it wasn&#39;t really present in the firt lecture, state machines that is)</em></p>

<h1 id="toc_18">References</h1>

<p><a id="1">[1]</a> 
Simmons, G.F., 2003. 
Precalculus mathematics in a nutshell: geometry, algebra, trigonometry. 
Wipf and Stock Publishers.</p>

<p><a id="2">[2]</a> 
Antonopoulos, A.M., 2014.
Mastering Bitcoin: unlocking digital cryptocurrencies.
O&#39;Reilly Media, Inc.</p>

<p><a id="3">[3]</a> 
Nakamoto, S., 2008.
Bitcoin: A peer-to-peer electronic cash system.
Decentralized Business Review, p.21260.</p>

<p><a id="4">[4]</a> 
Pardalos, P., Kotsireas, I., Guo, Y. and Knottenbelt, W., 2020.
Mathematical Research for Blockchain Economy.
Springer International Publishing.</p>

<p><a id="5">[5]</a>
Zahnentferner, J. and HK, I.O., 2018.
An Abstract Model of UTxO-based Cryptocurrencies with Scripts.
IACR Cryptol. ePrint Arch., 2018, p.469.</p>

<p><a id="5">[6]</a>
Pérez-Solà, C., Delgado-Segura, S., Navarro-Arribas, G. and Herrera-Joancomartí, J., 2019.
Double-spending prevention for bitcoin zero-confirmation transactions.
International Journal of Information Security, 18(4), pp.451-463.</p>

<p><a id="6">[7]</a>
Antonopoulos, A.M., 2017.
Mastering Bitcoin: Programming the open blockchain.
O&#39;Reilly Media, Inc.</p>

<h1 id="toc_19">Footnotes</h1>

<p><a name="fn1">1</a>. The use of the word: wallet can be misleading (and this may be why UTxO models are not hugely intuitive). A wallet is simply the stored set of cryptographic &#39;elements&#39; generated through the use of ECC Public-Private Key cryptograpy <a href="#2">[2]</a> and hashing algorithms. In the case of BitCoin, a user generates a public-private key pair, and their &#39;wallet&#39; address is generated using the following hashing algorithm: \(ADDR = RIPEMD160(SHA256(K))\), where K represents their public key and is then shortened further using additional functions that you can read about <a href="">here</a>. These keys (or &#39;cryptograhic elements&#39;) are stored within their wallet, which, if they are managing themselves (and not through the use of a central exchange or central online wallet) are kept offline (and are always off-chain). However, wallet addresses (which are tied to a wallet computer program) are available on-chain (they have to be in order to initiate a Tx).</p>

<p><a name="fn2">2</a>. Wallets can contain hundreds of public-private key pairs and the owner for X amount of BTC can in turn have hundreds of unspent transaction outputs. However, it must be noted that when such a user creates a new transaction, the set of their unspent transaction outputs will be used as inputs into the following transaction.</p>

<p><a name="fn3">3</a>. Transaction algorithms such as: P2PKH: &quot;Pay To Public Key Hash&quot;, P2PK: &quot;Pay To Public Key&quot;, P2SH: &quot;Pay To Script Hash&quot;, P2WPKH: &quot;Pay To Witness Public Key Hash&quot; <a href="#4">[4]</a>.</p>

<p><a name="fn4">4</a>. You can view the implementation of addresses here: <a href="https://github.com/input-output-hk/cardano-addresses/blob/master/core/lib/Cardano/Address.hs">https://github.com/input-output-hk/cardano-addresses/blob/master/core/lib/Cardano/Address.hs</a></p>



<script type="text/x-mathjax-config">
(function () {

MathJax.Hub.Config({
	'showProcessingMessages': false,
	'messageStyle': 'none'
});

if (typeof MathJaxListener !== 'undefined') {
	MathJax.Hub.Register.StartupHook('End', function () {
		MathJaxListener.invokeCallbackForKey_('End');
	});
}

})();
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

</html>
